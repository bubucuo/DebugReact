{"ast":null,"code":"/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nimport describeComponentFrame from 'shared/describeComponentFrame';\nimport getComponentName from 'shared/getComponentName';\nconst ReactDebugCurrentFrame = {};\nlet currentlyValidatingElement = null;\nexport function setCurrentlyValidatingElement(element) {\n  if (__DEV__) {\n    currentlyValidatingElement = element;\n  }\n}\n\nif (__DEV__) {\n  // Stack implementation injected by the current renderer.\n  ReactDebugCurrentFrame.getCurrentStack = null;\n\n  ReactDebugCurrentFrame.getStackAddendum = function () {\n    let stack = ''; // Add an extra top frame while an element is being validated\n\n    if (currentlyValidatingElement) {\n      const name = getComponentName(currentlyValidatingElement.type);\n      const owner = currentlyValidatingElement._owner;\n      stack += describeComponentFrame(name, currentlyValidatingElement._source, owner && getComponentName(owner.type));\n    } // Delegate to the injected renderer-specific implementation\n\n\n    const impl = ReactDebugCurrentFrame.getCurrentStack;\n\n    if (impl) {\n      stack += impl() || '';\n    }\n\n    return stack;\n  };\n}\n\nexport default ReactDebugCurrentFrame;","map":{"version":3,"sources":["/Users/gaoshaoyun/Documents/library/debug-react/src/react/packages/react/src/ReactDebugCurrentFrame.js"],"names":["describeComponentFrame","getComponentName","ReactDebugCurrentFrame","currentlyValidatingElement","setCurrentlyValidatingElement","element","__DEV__","getCurrentStack","getStackAddendum","stack","name","type","owner","_owner","_source","impl"],"mappings":"AAAA;;;;;;;;AAWA,OAAOA,sBAAP,MAAmC,+BAAnC;AACA,OAAOC,gBAAP,MAA6B,yBAA7B;AAEA,MAAMC,sBAAsB,GAAG,EAA/B;AAEA,IAAIC,0BAA0B,GAAI,IAAlC;AAEA,OAAO,SAASC,6BAAT,CAAuCC,OAAvC,EAAqE;AAC1E,MAAIC,OAAJ,EAAa;AACXH,IAAAA,0BAA0B,GAAGE,OAA7B;AACD;AACF;;AAED,IAAIC,OAAJ,EAAa;AACX;AACAJ,EAAAA,sBAAsB,CAACK,eAAvB,GAA0C,IAA1C;;AAEAL,EAAAA,sBAAsB,CAACM,gBAAvB,GAA0C,YAAmB;AAC3D,QAAIC,KAAK,GAAG,EAAZ,CAD2D,CAG3D;;AACA,QAAIN,0BAAJ,EAAgC;AAC9B,YAAMO,IAAI,GAAGT,gBAAgB,CAACE,0BAA0B,CAACQ,IAA5B,CAA7B;AACA,YAAMC,KAAK,GAAGT,0BAA0B,CAACU,MAAzC;AACAJ,MAAAA,KAAK,IAAIT,sBAAsB,CAC7BU,IAD6B,EAE7BP,0BAA0B,CAACW,OAFE,EAG7BF,KAAK,IAAIX,gBAAgB,CAACW,KAAK,CAACD,IAAP,CAHI,CAA/B;AAKD,KAZ0D,CAc3D;;;AACA,UAAMI,IAAI,GAAGb,sBAAsB,CAACK,eAApC;;AACA,QAAIQ,IAAJ,EAAU;AACRN,MAAAA,KAAK,IAAIM,IAAI,MAAM,EAAnB;AACD;;AAED,WAAON,KAAP;AACD,GArBD;AAsBD;;AAED,eAAeP,sBAAf","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {ReactElement} from 'shared/ReactElementType';\n\nimport describeComponentFrame from 'shared/describeComponentFrame';\nimport getComponentName from 'shared/getComponentName';\n\nconst ReactDebugCurrentFrame = {};\n\nlet currentlyValidatingElement = (null: null | ReactElement);\n\nexport function setCurrentlyValidatingElement(element: null | ReactElement) {\n  if (__DEV__) {\n    currentlyValidatingElement = element;\n  }\n}\n\nif (__DEV__) {\n  // Stack implementation injected by the current renderer.\n  ReactDebugCurrentFrame.getCurrentStack = (null: null | (() => string));\n\n  ReactDebugCurrentFrame.getStackAddendum = function(): string {\n    let stack = '';\n\n    // Add an extra top frame while an element is being validated\n    if (currentlyValidatingElement) {\n      const name = getComponentName(currentlyValidatingElement.type);\n      const owner = currentlyValidatingElement._owner;\n      stack += describeComponentFrame(\n        name,\n        currentlyValidatingElement._source,\n        owner && getComponentName(owner.type),\n      );\n    }\n\n    // Delegate to the injected renderer-specific implementation\n    const impl = ReactDebugCurrentFrame.getCurrentStack;\n    if (impl) {\n      stack += impl() || '';\n    }\n\n    return stack;\n  };\n}\n\nexport default ReactDebugCurrentFrame;\n"]},"metadata":{},"sourceType":"module"}